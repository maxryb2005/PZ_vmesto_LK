import wikipedia  # Подключаем модуль wikipedia для работы с API Википедии.


def main():  # Определяем основную функцию программы.
    wikipedia.set_lang("ru")  # Устанавливаем русский язык для получения статей на русском.

    query = input(
        "Введите запрос для поиска на Википедии: ")  # Запрашиваем у пользователя запрос для поиска статьи.

    while True:  # Запускаем бесконечный цикл для непрерывного взаимодействия с пользователем.
        try:
            page = wikipedia.page(query)  # Пытаемся найти страницу Википедии по введенному запросу.
            # Если страница найдена, выводим её заголовок и первые 1000 символов из содержания.
            print(f"\nСтатья: {page.title}\n\n{page.content[:1000]}...\n")
        except wikipedia.exceptions.DisambiguationError as e:  # Обрабатываем исключение при наличии нескольких вариантов.
            print("Найдено несколько вариантов, выберите один из них:")
            # Выводим первые три варианта для выбора пользователя.
            for option in e.options[:3]:
                print(option)
            query = input("Введите новый запрос: ")  # Запрашиваем у пользователя новый уточняющий запрос.
            continue  # Возвращаемся в начало цикла для повторного поиска.
        except Exception as e:  # Обрабатываем другие возможные исключения.
            print("Ошибка:", e)  # Выводим сообщение об ошибке.
            break  # Выходим из цикла, завершая программу.

        # Запрашиваем у пользователя действие, которое он хочет выполнить.
        action = input("Выберите действие:\n1. Листать параграфы\n2. Перейти на связанную страницу\n3. Выйти\n")

        if action == "1":  # Если выбран пункт "Листать параграфы".
            # Разделяем содержание страницы на параграфы по пустым строкам и сохраняем их в список.
            paragraphs = page.content.split("\n\n")
            for i, paragraph in enumerate(paragraphs):  # Проходим по каждому параграфу.
                # Печатаем номер параграфа и первые 200 символов из него.
                print(f"{i + 1}. {paragraph[:200]}...")
            input("Нажмите Enter для продолжения...")  # Ожидаем нажатия Enter для продолжения.

        elif action == "2":  # Если выбран пункт "Перейти на связанную страницу".
            related_query = input("Введите название связанной страницы: ")  # Запрашиваем новое название страницы.
            query = related_query  # Обновляем запрос для следующего поиска.

        elif action == "3":  # Если выбран пункт "Выйти".
            print("Выход из программы.")  # Сообщаем о завершении программы.
            break  # Выходим из цикла и завершаем программу.

        else:  # Если введен неверный вариант действия.
            print("Неверный выбор, попробуйте еще раз.")  # Сообщаем об ошибке и продолжаем цикл.

if __name__ == "__main__":  # Проверяем, запускается ли этот файл как основной модуль программы.
    main()  # Если да, вызываем функцию main(), которая запускает основной процесс программы.
